<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recettes du Maroc - Cuisine Traditionnelle</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-utensils"></i>
                <span>Recettes du Maroc</span>
            </div>
            
            <div class="nav-menu" id="navMenu">
                <a href="/" class="nav-link active">Accueil</a>
                <a href="/recipes" class="nav-link">Recettes</a>
                <a href="/categories" class="nav-link">Catégories</a>
                <a href="/search" class="nav-link">Recherche</a>
                <a href="/admin" class="nav-link">Admin</a>
            </div>
            
            <div class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1 class="hero-title">Découvrez les Saveurs du Maroc</h1>
            <p class="hero-subtitle">Des recettes authentiques transmises de génération en génération</p>
            <div class="hero-actions">
                <button class="btn btn-primary" onclick="navigateTo('/recipes')">
                    <i class="fas fa-search"></i>
                    Explorer les Recettes
                </button>
                <button class="btn btn-secondary" onclick="navigateTo('/categories')">
                    <i class="fas fa-list"></i>
                    Voir les Catégories
                </button>
            </div>
        </div>
        <div class="hero-image">
            <div class="hero-card">
                <img src="https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400&h=300&fit=crop" alt="Cuisine marocaine">
            </div>
        </div>
    </section>

    <!-- Categories Section -->
    <section class="categories-section">
        <div class="container">
            <h2 class="section-title">Catégories Populaires</h2>
            <div class="categories-grid" id="categoriesGrid">
                <!-- Chargé dynamiquement -->
            </div>
        </div>
    </section>

    <!-- Featured Recipes -->
    <section class="featured-section">
        <div class="container">
            <h2 class="section-title">Recettes à la Une</h2>
            <div class="recipes-grid" id="featuredRecipes">
                <!-- Chargé dynamiquement -->
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats-section">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <div class="stat-content">
                        <h3 class="stat-number" id="totalRecipes">250+</h3>
                        <p class="stat-label">Recettes</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-content">
                        <h3 class="stat-number">15K+</h3>
                        <p class="stat-label">Utilisateurs</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="stat-content">
                        <h3 class="stat-number">4.8</h3>
                        <p class="stat-label">Note Moyenne</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-content">
                        <h3 class="stat-number">30min</h3>
                        <p class="stat-label">Temps Moyen</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Newsletter -->
    <section class="newsletter-section">
        <div class="container">
            <div class="newsletter-content">
                <h2>Restez Informé</h2>
                <p>Recevez nos nouvelles recettes directement dans votre boîte mail</p>
                <form class="newsletter-form" onsubmit="subscribeNewsletter(event)">
                    <input type="email" placeholder="Votre adresse email" required>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-paper-plane"></i>
                        S'abonner
                    </button>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Recettes du Maroc</h3>
                    <p>Votre destination pour la cuisine marocaine authentique</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                        <a href="#"><i class="fab fa-tiktok"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Navigation</h4>
                    <ul>
                        <li><a href="/">Accueil</a></li>
                        <li><a href="/recipes">Recettes</a></li>
                        <li><a href="/categories">Catégories</a></li>
                        <li><a href="/search">Recherche</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Catégories</h4>
                    <ul>
                        <li><a href="/categories/tagines">Tagines</a></li>
                        <li><a href="/categories/couscous">Couscous</a></li>
                        <li><a href="/categories/patisseries">Pâtisseries</a></li>
                        <li><a href="/categories/soupes">Soupes</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Contact</h4>
                    <ul>
                        <li><i class="fas fa-envelope"></i> contact@recettesdumaroc.com</li>
                        <li><i class="fas fa-phone"></i> +212 6XX XXX XXX</li>
                        <li><i class="fas fa-map-marker-alt"></i> Casablanca, Maroc</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Recettes du Maroc. Tous droits réservés.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="../assets/js/app.js"></script>
    <script>
        // Initialiser la page d'accueil
        document.addEventListener('DOMContentLoaded', async function() {
            await loadCategories();
            await loadFeaturedRecipes();
            updateStats();
        });

        // Charger les catégories
        async function loadCategories() {
            try {
                const response = await fetch('/api/categories');
                const data = await response.json();
                
                const grid = document.getElementById('categoriesGrid');
                grid.innerHTML = data.categories.map(category => `
                    <div class="category-card" onclick="navigateTo('/categories/${category.slug}')">
                        <div class="category-image">
                            <img src="${category.image_url || 'https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=300&h=200&fit=crop'}" alt="${category.name}">
                        </div>
                        <div class="category-content">
                            <h3>${category.name}</h3>
                            <p>${category.description}</p>
                            <span class="recipe-count">${category.recipe_count || 0} recettes</span>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('Erreur chargement catégories:', error);
            }
        }

        // Charger les recettes à la une
        async function loadFeaturedRecipes() {
            try {
                const response = await fetch('/api/recipes?featured=true&limit=6');
                const data = await response.json();
                
                const grid = document.getElementById('featuredRecipes');
                grid.innerHTML = data.recipes.map(recipe => `
                    <div class="recipe-card" onclick="navigateTo('/recipes/${recipe.slug}')">
                        <div class="recipe-image">
                            <img src="${recipe.image_url || 'https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=300&h=200&fit=crop'}" alt="${recipe.title}">
                            <div class="recipe-badge">
                                <i class="fas fa-star"></i>
                                ${recipe.rating || '4.5'}
                            </div>
                        </div>
                        <div class="recipe-content">
                            <h3>${recipe.title}</h3>
                            <p>${recipe.description}</p>
                            <div class="recipe-meta">
                                <span><i class="fas fa-clock"></i> ${recipe.prep_time + recipe.cook_time}min</span>
                                <span><i class="fas fa-users"></i> ${recipe.servings} pers.</span>
                                <span class="difficulty ${recipe.difficulty}">${recipe.difficulty}</span>
                            </div>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('Erreur chargement recettes:', error);
            }
        }

        // Mettre à jour les statistiques
        async function updateStats() {
            try {
                const response = await fetch('/api/stats');
                const stats = await response.json();
                
                document.getElementById('totalRecipes').textContent = stats.totalRecipes + '+';
            } catch (error) {
                console.error('Erreur chargement stats:', error);
            }
        }

        // Newsletter
        async function subscribeNewsletter(event) {
            event.preventDefault();
            const email = event.target.querySelector('input[type="email"]').value;
            
            try {
                const response = await fetch('/api/newsletter', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email })
                });
                
                if (response.ok) {
                    showToast('Merci pour votre inscription !', 'success');
                    event.target.reset();
                } else {
                    throw new Error('Erreur inscription');
                }
            } catch (error) {
                showToast('Erreur lors de l\'inscription', 'error');
            }
        }
    </script>
</body>
</html>


